{"version":3,"sources":["containers/ArticleDetail/index.js"],"names":["goBack","window","history","back","ArticleDetail","props","id","match","params","_useState","useState","_useState2","Object","E_workspace_welson_github_daily_zhihu_react_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","loading","setLoading","_useState3","_useState4","content","setContent","_useState5","_useState6","headData","setHeadData","useEffect","styleLink","document","getElementById","storageKey","concat","storageData","JSON","parse","localStorage","getItem","handleResult","result","body","css","title","image_source","image","href","Service","article","articleDetail","then","setItem","stringify","data","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","_components_Loading__WEBPACK_IMPORTED_MODULE_4__","className","_components_Arrow__WEBPACK_IMPORTED_MODULE_5__","onClick","src","alt","_components_Mask__WEBPACK_IMPORTED_MODULE_3__","dangerouslySetInnerHTML","__html"],"mappings":"sLAOA,SAASA,IACPC,OAAOC,QAAQC,OA2DFC,UAxDO,SAACC,GACrB,IAAMC,EAAKD,EAAME,MAAMC,OAAOF,GADCG,EAEDC,oBAAS,GAFRC,EAAAC,OAAAC,EAAA,EAAAD,CAAAH,EAAA,GAExBK,EAFwBH,EAAA,GAEfI,EAFeJ,EAAA,GAAAK,EAGDN,mBAAS,MAHRO,EAAAL,OAAAC,EAAA,EAAAD,CAAAI,EAAA,GAGxBE,EAHwBD,EAAA,GAGfE,EAHeF,EAAA,GAAAG,EAICV,mBAAS,IAJVW,EAAAT,OAAAC,EAAA,EAAAD,CAAAQ,EAAA,GAIxBE,EAJwBD,EAAA,GAIdE,EAJcF,EAAA,GA+B/B,OA1BAG,oBAAU,WACR,IAAMC,EAAYC,SAASC,eAAe,gBACpCC,EAAU,SAAAC,OAAYvB,GACtBwB,EAAcC,KAAKC,MAAMC,aAAaC,QAAQN,IAUpD,SAASO,EAAaC,GAAQ,IACpBC,EAA0CD,EAA1CC,KAAMC,EAAoCF,EAApCE,IAAKC,EAA+BH,EAA/BG,MAAOC,EAAwBJ,EAAxBI,aAAcC,EAAUL,EAAVK,MACxChB,EAAUiB,KAAOJ,EAAI,GACrBf,EAAY,CACVgB,QACAC,eACAC,UAEFtB,EAAWkB,GACXtB,GAAW,GAEb,OApBAA,GAAW,GACRe,EACDK,EAAaL,GAEba,IAAQC,QAAQC,cAAcvC,GAAIwC,KAAK,SAAAV,GACrCH,aAAac,QAAQnB,EAAYG,KAAKiB,UAAUZ,EAAOa,OACvDd,EAAaC,EAAOa,QAcjB,kBAAMxB,EAAUiB,KAAO,KAC7B,CAACpC,IACDQ,EACMoC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAASvC,QAASA,IAGzBoC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,qBACbJ,EAAAC,EAAAC,cAACG,EAAA,EAAD,CAAOD,UAAU,UAAUE,QAASxD,KAEtCkD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBACXhC,EAASiB,OAEZW,EAAAC,EAAAC,cAAA,QAAME,UAAU,cAAhB,qBACMhC,EAASkB,cAEfU,EAAAC,EAAAC,cAAA,OAAKK,IAAKnC,EAASmB,MAAOiB,IAAI,KAC9BR,EAAAC,EAAAC,cAACO,EAAA,EAAD,OAEFT,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBACbM,wBAAyB,CAACC,OAAQ3C","file":"static/js/3.90192494.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Service from '../../service';\r\nimport ImgMask from '../../components/Mask';\r\nimport Loading from '../../components/Loading';\r\nimport Arrow from '../../components/Arrow';\r\nimport './index.scss';\r\n\r\nfunction goBack() {\r\n  window.history.back();\r\n}\r\n\r\nconst ArticleDetail = (props) => {\r\n  const id = props.match.params.id;\r\n  const [loading, setLoading] = useState(true);\r\n  const [content, setContent] = useState(null);\r\n  const [headData, setHeadData] = useState({});\r\n  useEffect(() => {\r\n    const styleLink = document.getElementById('detail-style');\r\n    const storageKey = `zhihu_${id}`\r\n    const storageData = JSON.parse(localStorage.getItem(storageKey));\r\n    setLoading(true);\r\n    if(storageData) {\r\n      handleResult(storageData)\r\n    } else {\r\n      Service.article.articleDetail(id).then(result => {\r\n        localStorage.setItem(storageKey, JSON.stringify(result.data))\r\n        handleResult(result.data)\r\n      })\r\n    }\r\n    function handleResult(result) {\r\n      const { body, css, title, image_source, image } = result;\r\n      styleLink.href = css[0];\r\n      setHeadData({\r\n        title,\r\n        image_source,\r\n        image,\r\n      })\r\n      setContent(body);\r\n      setLoading(false);\r\n    }\r\n    return () => styleLink.href = ''\r\n  }, [id]);\r\n  if(loading) {\r\n    return <Loading loading={loading} />\r\n  }\r\n  return (\r\n    <div className='detail-container'>\r\n      <div className='go-back-container'>\r\n        <Arrow className='go-back' onClick={goBack}/>\r\n      </div>\r\n      <div className='detail-header'>\r\n        <h1 className='detail-title'>\r\n          {headData.title}\r\n        </h1>\r\n        <span className='img-source'>\r\n          图片：{headData.image_source}\r\n        </span>\r\n        <img src={headData.image} alt=\"\"/>\r\n        <ImgMask />\r\n      </div>\r\n      <div className='detail-content'\r\n        dangerouslySetInnerHTML={{__html: content}}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ArticleDetail;"],"sourceRoot":""}