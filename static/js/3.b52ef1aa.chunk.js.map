{"version":3,"sources":["components/Loading/index.js","containers/ArticleDetail/index.js"],"names":["Loading","_ref","_ref$loading","loading","rest","Object","objectWithoutProperties","react_default","a","createElement","assign","className","style","display","ArticleDetail","props","id","match","params","_useState","useState","_useState2","slicedToArray","setLoading","_useState3","_useState4","content","setContent","_useState5","_useState6","headData","setHeadData","useEffect","styleLink","document","getElementById","storageKey","concat","storageData","JSON","parse","localStorage","getItem","handleResult","result","body","css","title","image_source","image","href","Service","article","articleDetail","then","setItem","stringify","data","src_components_Loading","src","alt","Mask","dangerouslySetInnerHTML","__html"],"mappings":"6LAeeA,SAZC,SAAAC,GAA6B,IAAAC,EAAAD,EAA3BE,eAA2B,IAAAD,KAAVE,EAAUC,OAAAC,EAAA,EAAAD,CAAAJ,EAAA,aAC3C,OACEM,EAAAC,EAAAC,cAAA,MAAAJ,OAAAK,OAAA,CAAKC,UAAU,WAAcP,EAA7B,CAAmCQ,MAAO,CAACC,QAASV,EAAU,OAAS,UACrEI,EAAAC,EAAAC,cAAA,aACAF,EAAAC,EAAAC,cAAA,aACAF,EAAAC,EAAAC,cAAA,aACAF,EAAAC,EAAAC,cAAA,aACAF,EAAAC,EAAAC,cAAA,sBCiDSK,UArDO,SAACC,GACrB,IAAMC,EAAKD,EAAME,MAAMC,OAAOF,GADCG,EAEDC,oBAAS,GAFRC,EAAAhB,OAAAiB,EAAA,EAAAjB,CAAAc,EAAA,GAExBhB,EAFwBkB,EAAA,GAEfE,EAFeF,EAAA,GAAAG,EAGDJ,mBAAS,MAHRK,EAAApB,OAAAiB,EAAA,EAAAjB,CAAAmB,EAAA,GAGxBE,EAHwBD,EAAA,GAGfE,EAHeF,EAAA,GAAAG,EAICR,mBAAS,IAJVS,EAAAxB,OAAAiB,EAAA,EAAAjB,CAAAuB,EAAA,GAIxBE,EAJwBD,EAAA,GAIdE,EAJcF,EAAA,GA+B/B,OA1BAG,oBAAU,WACR,IAAMC,EAAYC,SAASC,eAAe,gBACpCC,EAAU,SAAAC,OAAYrB,GACtBsB,EAAcC,KAAKC,MAAMC,aAAaC,QAAQN,IAUpD,SAASO,EAAaC,GAAQ,IACpBC,EAA0CD,EAA1CC,KAAMC,EAAoCF,EAApCE,IAAKC,EAA+BH,EAA/BG,MAAOC,EAAwBJ,EAAxBI,aAAcC,EAAUL,EAAVK,MACxChB,EAAUiB,KAAOJ,EAAI,GACrBf,EAAY,CACVgB,QACAC,eACAC,UAEFtB,EAAWkB,GACXtB,GAAW,GAEb,OApBAA,GAAW,GACRe,EACDK,EAAaL,GAEba,IAAQC,QAAQC,cAAcrC,GAAIsC,KAAK,SAAAV,GACrCH,aAAac,QAAQnB,EAAYG,KAAKiB,UAAUZ,EAAOa,OACvDd,EAAaC,EAAOa,QAcjB,kBAAMxB,EAAUiB,KAAO,KAC7B,CAAClC,IACDb,EACMI,EAAAC,EAAAC,cAACiD,EAAD,CAASvD,QAASA,IAGzBI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oBACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBACbJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,gBACXmB,EAASiB,OAEZxC,EAAAC,EAAAC,cAAA,QAAME,UAAU,cAAhB,qBACMmB,EAASkB,cAEfzC,EAAAC,EAAAC,cAAA,OAAKkD,IAAK7B,EAASmB,MAAOW,IAAI,KAC9BrD,EAAAC,EAAAC,cAACoD,EAAA,EAAD,OAEFtD,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBACbmD,wBAAyB,CAACC,OAAQrC","file":"static/js/3.b52ef1aa.chunk.js","sourcesContent":["import React from 'react';\r\nimport './index.scss';\r\n\r\nconst Loading = ({loading=true, ...rest}) => {\r\n  return (\r\n    <div className='loading' {...rest} style={{display: loading ? 'flex' : 'none'}}>\r\n      <span></span>\r\n      <span></span>\r\n      <span></span>\r\n      <span></span>\r\n      <span></span>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Loading;","import React, { useState, useEffect } from 'react';\r\nimport Service from '../../service';\r\nimport ImgMask from '../../components/Mask';\r\nimport Loading from '../../components/Loading';\r\nimport './index.scss';\r\n\r\nconst ArticleDetail = (props) => {\r\n  const id = props.match.params.id;\r\n  const [loading, setLoading] = useState(true);\r\n  const [content, setContent] = useState(null);\r\n  const [headData, setHeadData] = useState({});\r\n  useEffect(() => {\r\n    const styleLink = document.getElementById('detail-style');\r\n    const storageKey = `zhihu_${id}`\r\n    const storageData = JSON.parse(localStorage.getItem(storageKey));\r\n    setLoading(true);\r\n    if(storageData) {\r\n      handleResult(storageData)\r\n    } else {\r\n      Service.article.articleDetail(id).then(result => {\r\n        localStorage.setItem(storageKey, JSON.stringify(result.data))\r\n        handleResult(result.data)\r\n      })\r\n    }\r\n    function handleResult(result) {\r\n      const { body, css, title, image_source, image } = result;\r\n      styleLink.href = css[0];\r\n      setHeadData({\r\n        title,\r\n        image_source,\r\n        image,\r\n      })\r\n      setContent(body);\r\n      setLoading(false);\r\n    }\r\n    return () => styleLink.href = ''\r\n  }, [id]);\r\n  if(loading) {\r\n    return <Loading loading={loading} />\r\n  }\r\n  return (\r\n    <div className='detail-container'>\r\n      <div className='detail-header'>\r\n        <h1 className='detail-title'>\r\n          {headData.title}\r\n        </h1>\r\n        <span className='img-source'>\r\n          图片：{headData.image_source}\r\n        </span>\r\n        <img src={headData.image} alt=\"\"/>\r\n        <ImgMask />\r\n      </div>\r\n      <div className='detail-content'\r\n        dangerouslySetInnerHTML={{__html: content}}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ArticleDetail;"],"sourceRoot":""}