(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t,a){"use strict";var n=a(30),c=a(31),r=a(11),i=a.n(r),o="".concat("https://zhihu-agent.herokuapp.com","/get?api="),l={startimage:"".concat(o,"/4/start-image/1080*1776"),latest:"".concat(o,"/4/news/latest"),article:"".concat(o,"/4/news/before/<date>"),articleDetail:"".concat(o,"/4/news/<id>"),newsinfo:"".concat(o,"/4/story-extra")},s={article:new(function(){function e(){Object(n.a)(this,e)}return Object(c.a)(e,[{key:"latest",value:function(){return i.a.get(l.latest)}},{key:"articleBeforeDate",value:function(e){return i.a.get(l.article.replace("<date>",e))}},{key:"articleDetail",value:function(e){return i.a.get(l.articleDetail.replace("<id>",e))}}]),e}())};t.a=s},27:function(e,t,a){"use strict";var n=a(0),c=a.n(n);a(59);t.a=function(){return c.a.createElement("div",{className:"img-mask"})}},34:function(e,t,a){e.exports=a.p+"static/media/nodata.2d902be2.svg"},36:function(e,t,a){e.exports=a(68)},58:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n,c=a(0),r=a.n(c),i=a(29),o=a.n(i),l=a(9),s=a(7),u=a(35),m=a(8),d=a(13),f=function(e){return e>9?e:"0".concat(e)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",a=e.getFullYear(),n=f(e.getMonth()+1),c=f(e.getDate());return"".concat(a).concat(t).concat(n).concat(t).concat(c)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(1*new Date(e)-24*t*3600*1e3)},E=a(26),g=(a(58),function(e){var t=e.className,a=void 0===t?"":t,i=e.list,o=e.time,l=void 0===o?3e3:o,s=e.current,u=void 0===s?0:s,d=e.children,f=Object(E.a)(e,["className","list","time","current","children"]),v=Object(c.useState)(u),p=Object(m.a)(v,2),g=p[0],b=p[1],h=Object(c.useState)(),w=Object(m.a)(h,2),j=w[0],O=w[1],N=i.length;return Object(c.useEffect)(function(){return n=setInterval(function(){b(function(e){return(e+1)%N})},l),function(){return clearTimeout(n)}},[l,N,j]),r.a.createElement("div",Object.assign({className:"swiper-container "+a},f),r.a.createElement("div",{className:"swiper-content"},i.map(function(e,t){return r.a.createElement("div",{key:t,className:"swiper-slide ".concat(g===t?"swiper-slide-active":"")},d({item:e}))})),r.a.createElement("div",{className:"swiper-pagination"},Array.from({length:N}).map(function(e,t){return r.a.createElement("span",{key:t,className:"\n                swiper-pagination-dot \n                ".concat(g===t?"swiper-pagination-dot-active":"","\n              "),onClick:function(e){e.stopPropagation(),clearTimeout(n),O(Math.random()),b(t)}})})))}),b=a(27),h=(a(60),function(e){var t=e.data;return r.a.createElement(g,{list:t,className:"banner-container"},function(e){var t=e.item;return r.a.createElement(l.b,{to:"/article/".concat(t.id)},r.a.createElement("div",{className:"banner-item"},r.a.createElement("img",{src:t.image,alt:""}),r.a.createElement("span",{className:"item-title"},t.title),r.a.createElement(b.a,null)))})}),w=(a(65),function(e){var t=e.data;return r.a.createElement("div",{className:"article-list-container"},!!t.length&&t.map(function(e){return r.a.createElement("div",{key:e.date,className:"list-content"},r.a.createElement("div",{className:"list-date"},e.date.substr(0,4)+"/"+e.date.substr(4,2)+"/"+e.date.substr(6,2)),r.a.createElement("div",{className:"article-list"},e.stories&&e.stories.map(function(e){return r.a.createElement(l.b,{to:"/article/".concat(e.id),key:e.id},r.a.createElement("div",{className:"article"},r.a.createElement("img",{src:e.images[0],alt:""}),r.a.createElement("div",{className:"article-info"},e.title)))})))}))}),j=a(34),O=a.n(j),N=(a(66),v(new Date)),y=function(e){var t=e.style,a=Object(c.useState)([]),n=Object(m.a)(a,2),i=n[0],o=n[1],l=Object(c.useState)({}),s=Object(m.a)(l,2),f=s[0],E=s[1],g=Object(c.useState)(!1),b=Object(m.a)(g,2),j=b[0],y=b[1];function k(){y(!0);var e=N.split("/").join("");return d.a.article.articleBeforeDate(e).then(function(e){N=v(p(N));var t=e.data,a=t.date,n=t.stories;y(!1),E(function(e){return[].concat(Object(u.a)(e),[{date:a,stories:n}])})}).catch(function(e){y(!1),console.log(e)})}Object(c.useEffect)(function(){d.a.article.latest().then(function(e){var t=e.data,a=t.date,n=t.stories,c=t.top_stories;o(c),E([{date:a,stories:n}])}).then(function(){k()})},[]);var D=Object(c.useRef)(null);return Object(c.useEffect)(function(){var e,t=!1,a=0;function n(n){var c=n.target,r=c.scrollTop,i=c.clientHeight,o=c.scrollHeight;!t&&r>a&&o<=r+i+300&&(clearTimeout(e),e=setTimeout(function(){a=r,t=!0,console.time(),k().then(function(){console.timeEnd(),t=!1})},0))}var c=D.current;return c.addEventListener("scroll",n),function(){return c.removeEventListener("scroll",n)}},[]),r.a.createElement("div",{className:"app-container",ref:D,style:t},r.a.createElement(h,{data:i}),f.length?r.a.createElement(w,{data:f}):r.a.createElement("div",{className:"no-data"},r.a.createElement("img",{src:O.a,alt:""}),r.a.createElement("p",null,"\u6682\u65e0\u6570\u636e")),j&&r.a.createElement("div",{class:"loadmore-wrapper"},r.a.createElement("div",{class:"loadmore-container"},r.a.createElement("div",{class:"loadmore-img"}),r.a.createElement("span",null,"\u4e0b\u6ed1\u67e5\u770b\u66f4\u591a"))))},k=Object(c.lazy)(function(){return a.e(3).then(a.bind(null,71))}),D=function(){return r.a.createElement(l.a,null,r.a.createElement(c.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(s.a,{path:"/",render:function(e){var t={display:"block"};return"/"!==e.location.pathname&&(t.display="none"),r.a.createElement(y,{style:t})}}),r.a.createElement(s.a,{path:"/article/:id",component:k})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(67);o.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.a5ced450.chunk.js.map