(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,t,a){"use strict";var n=a(32),c=a(33),r=a(12),i=a.n(r),l="".concat("https://zhihu-agent.herokuapp.com","/get?api="),o={startimage:"".concat(l,"/4/start-image/1080*1776"),latest:"".concat(l,"/4/news/latest"),article:"".concat(l,"/4/news/before/<date>"),articleDetail:"".concat(l,"/4/news/<id>"),newsinfo:"".concat(l,"/4/story-extra")},s={article:new(function(){function e(){Object(n.a)(this,e)}return Object(c.a)(e,[{key:"latest",value:function(){return i.a.get(o.latest)}},{key:"articleBeforeDate",value:function(e){return i.a.get(o.article.replace("<date>",e))}},{key:"articleDetail",value:function(e){return i.a.get(o.articleDetail.replace("<id>",e))}}]),e}())};t.a=s},27:function(e,t,a){"use strict";var n=a(0),c=a.n(n);a(61);t.a=function(){return c.a.createElement("div",{className:"img-mask"})}},29:function(e,t,a){"use strict";var n=a(9),c=a(0),r=a.n(c);a(68);t.a=function(e){var t=e.className,a=void 0===t?"":t,c=Object(n.a)(e,["className"]);return r.a.createElement("div",Object.assign({className:"arrow-img ".concat(a)},c))}},30:function(e,t,a){"use strict";var n=a(9),c=a(0),r=a.n(c);a(69);t.a=function(e){var t=e.loading,a=void 0===t||t,c=Object(n.a)(e,["loading"]);return r.a.createElement("div",Object.assign({className:"loading"},c,{style:{display:a?"flex":"none"}}),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null))}},36:function(e,t,a){e.exports=a.p+"static/media/nodata.2d902be2.svg"},38:function(e,t,a){e.exports=a(72)},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n,c=a(0),r=a.n(c),i=a(31),l=a.n(i),o=a(10),s=a(8),u=a(37),m=a(7),d=a(14),f=function(e){return e>9?e:"0".concat(e)},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",a=e.getFullYear(),n=f(e.getMonth()+1),c=f(e.getDate());return"".concat(a).concat(t).concat(n).concat(t).concat(c)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(1*new Date(e)-24*t*3600*1e3)},E=a(9),g=(a(60),function(e){var t=e.className,a=void 0===t?"":t,i=e.list,l=e.time,o=void 0===l?3e3:l,s=e.current,u=void 0===s?0:s,d=e.children,f=Object(E.a)(e,["className","list","time","current","children"]),v=Object(c.useState)(u),p=Object(m.a)(v,2),g=p[0],b=p[1],h=Object(c.useState)(),w=Object(m.a)(h,2),j=w[0],O=w[1],N=i.length;return Object(c.useEffect)(function(){return n=setInterval(function(){b(function(e){return(e+1)%N})},o),function(){return clearTimeout(n)}},[o,N,j]),r.a.createElement("div",Object.assign({className:"swiper-container "+a},f),r.a.createElement("div",{className:"swiper-content"},i.map(function(e,t){return r.a.createElement("div",{key:t,className:"swiper-slide ".concat(g===t?"swiper-slide-active":"")},d({item:e}))})),r.a.createElement("div",{className:"swiper-pagination"},Array.from({length:N}).map(function(e,t){return r.a.createElement("span",{key:t,className:"\n                swiper-pagination-dot \n                ".concat(g===t?"swiper-pagination-dot-active":"","\n              "),onClick:function(e){e.stopPropagation(),clearTimeout(n),O(Math.random()),b(t)}})})))}),b=a(27),h=(a(62),function(e){var t=e.data;return r.a.createElement(g,{list:t,className:"banner-container"},function(e){var t=e.item;return r.a.createElement(o.b,{to:"/article/".concat(t.id)},r.a.createElement("div",{className:"banner-item"},r.a.createElement("img",{src:t.image,alt:""}),r.a.createElement("span",{className:"item-title"},t.title),r.a.createElement(b.a,null)))})}),w=(a(67),function(e){var t=e.data;return r.a.createElement("div",{className:"article-list-container"},!!t.length&&t.map(function(e){return r.a.createElement("div",{key:e.date,className:"list-content"},r.a.createElement("div",{className:"list-date"},e.date.substr(0,4)+"/"+e.date.substr(4,2)+"/"+e.date.substr(6,2)),r.a.createElement("div",{className:"article-list"},e.stories&&e.stories.map(function(e){return r.a.createElement(o.b,{to:"/article/".concat(e.id),key:e.id},r.a.createElement("div",{className:"article"},r.a.createElement("img",{src:e.images[0],alt:""}),r.a.createElement("div",{className:"article-info"},e.title)))})))}))}),j=a(36),O=a.n(j),N=a(29),y=a(30),k=(a(70),v(new Date)),D=function(e){var t=e.style,a=Object(c.useState)(!0),n=Object(m.a)(a,2),i=n[0],l=n[1],o=Object(c.useState)([]),s=Object(m.a)(o,2),f=s[0],E=s[1],g=Object(c.useState)({}),b=Object(m.a)(g,2),j=b[0],D=b[1],S=Object(c.useState)(!1),T=Object(m.a)(S,2),x=T[0],B=T[1];function z(){B(!0);var e=k.split("/").join("");return d.a.article.articleBeforeDate(e).then(function(e){k=v(p(k));var t=e.data,a=t.date,n=t.stories;B(!1),D(function(e){return[].concat(Object(u.a)(e),[{date:a,stories:n}])})}).catch(function(e){B(!1),console.log(e)})}Object(c.useEffect)(function(){d.a.article.latest().then(function(e){var t=e.data,a=t.date,n=t.stories,c=t.top_stories;l(!1),E(c),D([{date:a,stories:n}])}).then(function(){z()})},[]);var L=Object(c.useRef)(null);return Object(c.useEffect)(function(){var e,t=!1,a=0;function n(n){var c=n.target,r=c.scrollTop,i=c.clientHeight,l=c.scrollHeight;!t&&r>a&&l<=r+i+300&&(clearTimeout(e),e=setTimeout(function(){a=r,t=!0,console.time(),z().then(function(){console.timeEnd(),t=!1})},0))}var c=L.current;return c.addEventListener("scroll",n),function(){return c.removeEventListener("scroll",n)}},[]),r.a.createElement("div",{className:"app-container",ref:L,style:t},i?r.a.createElement(y.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{data:f}),j.length?r.a.createElement(w,{data:j}):r.a.createElement("div",{className:"no-data"},r.a.createElement("img",{src:O.a,alt:""}),r.a.createElement("p",null,"\u6682\u65e0\u6570\u636e")),r.a.createElement("div",{className:"loadmore-wrapper",style:{display:x?"block":"none"}},r.a.createElement("div",{className:"loadmore-container"},r.a.createElement(N.a,null),r.a.createElement("span",null,"\u4e0b\u6ed1\u67e5\u770b\u66f4\u591a")))))},S=Object(c.lazy)(function(){return a.e(3).then(a.bind(null,74))}),T=function(){return r.a.createElement(o.a,{basename:"/daily-zhihu-react"},r.a.createElement(c.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(s.a,{path:"/",render:function(e){var t={display:"block"};return console.log(e),"/"!==e.location.pathname&&(t.display="none"),r.a.createElement(D,{style:t})}}),r.a.createElement(s.a,{path:"/article/:id",component:S})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(71);l.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.61c61a4b.chunk.js.map